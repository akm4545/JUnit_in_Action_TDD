# **테스트 커버리지 측정하기**  
단위 테스트를 작성하면 애플리케이션을 변경하고 리팩토링할 때 확신을 가질 수 있다. 소스 코드를 바꾼 뒤  
테스트를 돌려 보면 추가한 기능과 변경 내역이 기존 테스트를 통과하는지 못하는지 바로 알 수 있다. 문제는  
코드를 변경함으로써 기존 테스트로 커버하지 못했던 기능이 동작하지 않을 수 있다는 것이다.  
이 문제를 해결하기 위해서는 사용자나 개발자가 테스트를 수행할 때 정확히 어떤 코드가 실행되고 어떤 코드가  
실행이 되지 않는지 알아야 한다. 이상적으로는 테스트가 애플리케이션 코드의 100%를 커버하는 게 좋다.  
테스트 커버리지는 그 자체로 코드의 품질을 어느 정도 보증한다. 하지만 이는 여전히 논란의 여지가 있는 지표다.  
높은 테스트 커버리지가 테스트의 질을 보장하지 않기 떄문이다. 훌륭한 개발자는 테스트를 실행하여 얻어 낸  
기계적인 백분율수치 이상을 볼 수 있어야 한다.  
  
# **테스트 커버리지란 무엇인가**  
블랙박스 테스트 시 테스트 커버리지를 계산하는 데 다양한 지표를 사용할 수 있다. 가장 기본적인 지표는 테스트 묶음을 실행하는  
동안 호출되는 애플리케이션의 메서드나 코드 줄의 수를 가지고 나타낸 백분율이다. 또 다른 지표로 테스트가  
호출하는 메서드를 추적해서 집계할 수 있다. 이 결과는 테스트가 성공했는지를 알려 주지 않는다. 하지만 메서드에  
대한 테스트가 있는지 없는지를 알려 줄 수는 있다.  
  
화이트박스 테스트 시 메서드가 어떻게 구현되어 있는지 자세히 알고 있다면 단위 테스트를 작성할 수 있다.  
테스트 대상 메서드에 분기문이 있을 경우 각 분기마다 하나씩 단위 테스트를 작성해야 한다.  
  
일반적으로 화이트박스 테스트(단위 테스트)를 활용하면 더 높은 테스트 커버리지를 얻을 수 있다. 더 많은 메서드에  
접근할 수 있을뿐더러 각 메서드에 대한 입력과 보조 객체의 동작을 제어할 수 있기 떄문이다.  
화이트박스 테스트는 protected 메서드, package-private 메서드, public 메서드에도 실행할 수 있으므로 블랙박스  
테스트보다 일반적으로 코드 커버리지가 더 높게 나온다.  
  
블랙박스 테스트로 높은 코드 커버리지를 달성하지 못했다면 보통은 더 많은 테스트가 필요하다는 뜻이다(애플리케이션에  
아직 테스트하지 않은 부분이 있을 것이다). 혹은 비즈니스 목표에 기여하지 않는 불필요한 로직이 있을 수 있다.  
두 경우 모두 실제 원인을 찾기 위해 추가적인 분석이 필요하다.  
  
테스트 커버리지가 높은 프로그램에서는 테스트를 실행할 때 보통 더 많은 코드가 실행된다. 테스트 커버리지가 낮은 프로그램  
보다 발견되지 않은 버그가 더 적을 수 있다.  
  
